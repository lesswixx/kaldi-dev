<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="page-title">Номер — Калды</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/main.css" />
  <link rel="icon" href="assets/logo.png" type="image/png">
</head>
<body>
  <div class="container">
<header class="header">
  <a class="brand" href="index.html">
    <img src="assets/logo.png" alt="Калды — логотип">
    <div class="title"><span class="ru">Калды</span><span class="subtitle">База отдыха</span></div>
  </a>

  <!-- КНОПКА-БУРГЕР -->
  <button class="burger" aria-label="Меню" aria-expanded="false">
    <span></span><span></span><span></span>
  </button>

  <nav class="nav">
    <a href="rooms.html">Домики</a>
    <a href="services.html">Услуги</a>
    <a href="gallery.html">Галерея</a>
    <a href="index.html#about">О нас</a>
    <a href="contacts.html">Контакты</a>
    <!-- Кнопка убрана, виджет бронирования будет внизу страницы -->
  </nav>
</header>

    <section id="room-details" class="section" data-rooms-src="assets/data/rooms.json">
  <h1 id="room-title">Загрузка…</h1>
  <div id="room-gallery" class="room-gallery"></div>

  <h2>Описание</h2>
  <p id="room-description">Подождите, подгружаем описание…</p>

  <h2>Характеристики</h2>
  <ul id="room-features"></ul>

  <p id="room-price" style="font-weight:700"></p>
  <!-- Контейнер для виджета Контур.Отель -->
  <div id="kontur-form-room"></div>
</section>

  </div>

  <!-- Единый лайтбокс (тот же, что на странице галереи) -->
  <div id="lightbox" class="lightbox" style="display:none;">
    <button class="lightbox-close" aria-label="Закрыть">×</button>
    <button class="lightbox-prev" aria-label="Предыдущее фото">‹</button>
    <img src="" alt="" class="lightbox-img">
    <button class="lightbox-next" aria-label="Следующее фото">›</button>
  </div>

  <footer class="footer">
    <div class="container">
      <div class="row">
        <div>© 2025 «Калды». База отдыха у озера.</div>
        <div class="badge-pill">Тёплый отдых у воды</div>
      </div>
    </div>
  </footer>

<script src="scripts/main.js"></script>


<script type="text/javascript">
(function(start){ 
  var s=document.createElement("script");
  s.src="https://bookonline24.ru/widget.js"; s.async=true;
  s.onload=s.onreadystatechange=function(){var st=this.readyState; if(!st||st==="complete") start();};
  document.head.appendChild(s);
})(function(){ 
  // --- ensure containers exist BEFORE widget init ---
  (function(){ 
(function(){ 
  var id="kontur-form-room";
  if(document.getElementById(id)) return;
  var el=document.createElement("div"); el.id=id; el.style.minHeight="260px"; el.style.margin="16px 0";
  var anchors=["#room",".room","main",".content","body"]; var parent=null;
  for(var i=0;i<anchors.length;i++){ var cand=document.querySelector(anchors[i]); if(cand){ parent=cand; break; } }
  (parent||document.body).appendChild(el);
})(); })();
  function addAll(){ try{ HotelWidget.add({ type: "bookingForm", inline: false, appearance: { container: "kontur-form-room" } }); }catch(e){ console.error("HotelWidget addAll failed", e); } }
  function init(v){ 
    try{ 
      HotelWidget.init({
        hotelId: "642da836-2765-4865-948f-35039fe2e065",
        version: v,
        hooks: {
          onInit: function(){ console.log("HotelWidget onInit v"+v); addAll(); },
          onBooking: function(v){ console.log("HotelWidget onBooking", v); },
          onError: function(e){ 
            console.error("HotelWidget onError v"+v, e);
            var msg=(e && (e.message||e))||"";
            if(v!=="1" && String(msg).toLowerCase().includes("not available")){ 
              console.warn("Retrying HotelWidget with version=1 ..."); 
              init("1");
            }
          }
        }
      });
    }catch(err){ console.error("HotelWidget init error v"+v, err); }
  }
  init("2");
});
</script>

</body>
</html>